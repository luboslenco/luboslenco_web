<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Shader Editor</title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>

	<div id="editor1">// Vertex Shader
precision highp float;

attribute vec3 pos;
attribute vec3 nor;

uniform mat4 M;
uniform mat4 P;
uniform mat4 V;

varying vec3 position;
varying vec3 normal;

void main() {
	gl_Position = P * V * M * vec4(pos, 1.0);
	position = gl_Position.xyz;
	normal = normalize((M * vec4(nor, 0.0)).xyz);
}
	</div>
	
	<div id="editor2">// Fragment Shader
precision mediump float;

varying vec3 normal;
varying vec3 position;

void main() {
	float r = (sin(normal.x) + 1.0) / 2.0;
    float g = (cos(position.y) + 1.0) / 2.0;
    float b = (sin(position.z) + 1.0) / 2.0;
	gl_FragColor = vec4(r, g, b, 1.0);
}
</div>
	
	<script src="ace.js" type="text/javascript" charset="utf-8"></script>
	<script src="theme-monokai.js" type="text/javascript" charset="utf-8"></script>
	<script src="mode-glsl.js" type="text/javascript" charset="utf-8"></script>
    <script>

        var editor1 = ace.edit("editor1");
        var editor2 = ace.edit("editor2");
        editor1.setTheme("ace/theme/monokai");
        editor2.setTheme("ace/theme/monokai");

        var GLSLMode = ace.require("ace/mode/glsl").Mode;
    	editor1.session.setMode(new GLSLMode());
    	editor2.session.setMode(new GLSLMode());

    	function setShaders() {
    		Main.setShaders(editor1.getValue(), editor2.getValue());
    	}
    </script>

    <button id="button_run" onclick="setShaders()" type="button">Run</button>

	<p align="right">
		<canvas id="khanvas" width="640" height="480" style="outline: none;"></canvas>
	</p>
	<script src="kha.js"></script>
</body>
</html>
