<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>TryKha</title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>

<div id="editor1">
</div>
	<script src="ace.js" type="text/javascript" charset="utf-8"></script>
	<script src="theme-monokai.js" type="text/javascript" charset="utf-8"></script>
	<script src="mode-haxe.js" type="text/javascript" charset="utf-8"></script>
    <script>
    	var examples = [];

    	examples.push(`var size = 100;
var x = 0;
var y = 0;

function update() {
    x = Math.sin(Scheduler.time()) * 150 + (320 - size / 2);
    y = Math.cos(Scheduler.time()) * 150 + (240 - size / 2);
}

function render(frame) {
    g = frame.g2;
    g.begin(true, 0xff222222);
    
    g.color = 0xffff4444;
    g.fillRect(Std.int(x), Std.int(y), size, size);
    
    g.end();
}

System.notifyOnRender(render);
Scheduler.addTimeTask(update, 0, 1 / 60);
`);




        var editor1 = ace.edit("editor1");
        editor1.setTheme("ace/theme/monokai");

        var HaxeMode = ace.require("ace/mode/haxe").Mode;
    	editor1.session.setMode(new HaxeMode());
    	editor1.setValue(examples[0], -1);

    	function setShader() {
    		Main.setScript(editor1.getValue());
    	}

    	function getComboExample(sel) {
		    var value = parseInt(sel.value);
		    editor1.setValue(examples[value], -1);
		}
    </script>

    <button id="button_run" onclick="setShader()" type="button">Run</button>

    <select id="combo_example" onchange="getComboExample(this)">
	<option value="0">Example 1</option>
	<option value="1">Example 2</option>
	<option value="2">Example 3</option>
	</select>

	<p align="right">
		<canvas id="khanvas" width="640" height="480" style="outline: none;"></canvas>
	</p>
	<script src="kha.js"></script>
</body>
</html>
